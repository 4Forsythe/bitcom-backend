<picture>
      <img
      height="64"
      src="https://github.com/4Forsythe/bitcom-client/blob/master/public/static/bitcom-banner.png?raw=true" alt="Логотип компании «БитКом»">
</picture>

###

# Документация по интеграции

В настоящее время API включает в себя возможности загрузки и изменения информации о **товарах**, **брендах**, **девайсах** и **категориях**, а также предоставляет методы для **загрузки изображений** в формате **JPEG** и **PNG**.

Текущая документация актуальна для версии **0.2.0 Alpha.**

## HTTP Basic Auth

Для работы с POST-запросами необходимо иметь валидные ключи **Basic Authentication**, которые следует указать в заголовке **Auth > Basic** при отправке HTTP-запроса.

Соответствующие ключи доступа можно получить напрямую от разработчика.

## GET-методы

Независимые GET-запросы могут облегчить процесс тестирования и дебагинга API сервера, не прибегая к помощи разработчика.

Используйте актуальный **адрес сервера** для взаимодействия с нижепредставленными методами.

- `https://bitcom63.ru/server/api`

Для следующих GET-методов **необязательно** использовать **Basic Auth** токен:

- `/product` — список товаров
- `/brand` — список брендов
- `/device` — список девайсов (подкатегорий)
- `/product-category` — список категорий
- `/static/:имя_файла` — статические файлы (изображения)

### Параметры (Query Parameters)

Большинство методов поддерживают следующие универсальные параметры запроса:

| Параметр | Значение                                                            |
| :------: | ------------------------------------------------------------------- |
| **take** | Лимит выводимых данных за один запрос (0 - ∞)                       |
| **skip** | Смещение определенного количества данных вперед при запросе (0 - ∞) |

## POST-методы

В большинстве случаев POST-запросы используются для **выгрузки или обновления** данных на сервере. Для работы с ними **обязательно** требуется **Basic Auth** токен.

Используйте актуальный **адрес сервера** для взаимодействия с нижепредставленными методами.

- `https://bitcom63.ru/server/api`

###

> Вопреки общепринятой системе CRUD и законам человеческой логики, для обновления существующих данных используются те же POST-методы, что и при создании. В таком случае, при запросе на обновление необходимо передать в **body** обязательный атрибут **id** и указать **все те же обязательные свойства,** что и при создании, **изменив только те поля, которые нужно актуализировать.** Если сервер не найдет никакой информации об этом id, он попытается **создать новый экземпляр** на основе body!

> Для полного удаления существующего экземпляра с сервера, необходимо указать **id** и **все те же обязательные свойства,** что и при создании, однако в поле **count** следует указать **значение 0.**

### Товары

- `/product` — загрузка товаров на сервер

#### Body (только JSON)

|    Атрибут     | Значение                                                                                                                                                      |
| :------------: | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|     **id**     | **обязательная строка** идентификатора товара                                                                                                                 |
|    **name**    | **обязательная строка** названия товара                                                                                                                       |
|   **count**    | **обязательное целое число** остатка товара на продажу                                                                                                        |
|   **price**    | **обязательное целое или плавующее число** розничной цены за единицу товара (например, _713_, _"1100,99"_ и т.д.)                                             |
|  **barcode**   | **обязательный массив строк** всех серийных номеров товара (например, ["qwerty", "xyz"])                                                                      |
|   **model**    | **обязательная строка** для описания конкретной модели товара, при отсутствии конкретной модели можно использовать название                                   |
|  **imageUrl**  | **необязательная строка** ссылки на файл изображения товара **при его наличии** в формате "файл.ext" (например, _"image.jpg"_, _"some-hash-5432.png"_ и т.д.) |
| **categoryId** | **необязательная строка** ссылки на id категории                                                                                                              |
|  **deviceId**  | **необязательная строка** ссылки на id девайса                                                                                                                |
|  **brandId**   | **необязательная строка** ссылки на id бренда                                                                                                                 |

**Обратите внимание на внешние ключи:** при указании невалидных ссылок на внешние ключи в **categoryId**, **deviceId** или **brandId,** сервер выдаст ошибку со статусом 400.

###

### Бренды

- `/brand` — загрузка брендов на сервер

#### Body (только JSON)

| Атрибут  | Значение                                      |
| :------: | --------------------------------------------- |
|  **id**  | **обязательная строка** идентификатора бренда |
| **name** | **обязательная строка** названия бренда       |

###

### Девайсы (подкатегории)

- `/device` — загрузка девайсов на сервер

#### Body (только JSON)

| Атрибут  | Значение                                       |
| :------: | ---------------------------------------------- |
|  **id**  | **обязательная строка** идентификатора девайса |
| **name** | **обязательная строка** названия девайса       |

###

### Категории

- `/product-category` — загрузка категорий на сервер

#### Body (только JSON)

| Атрибут  | Значение                                         |
| :------: | ------------------------------------------------ |
|  **id**  | **обязательная строка** идентификатора категории |
| **name** | **обязательная строка** названия категории       |

###

### Статические картинки

- `/upload` — загрузка одного или нескольких файлов на сервер

#### Body (только Form-Data)

| Атрибут  | Значение                       |
| :------: | ------------------------------ |
| **file** | **обязательный бинарный** файл |

#### Для корректной работы передачи файлов важно учесть несколько особенностей:

- Файл должен быть записан в формате **key-value** (body -> form-data)
- Все файлы (или файл) должны иметь **общее название ключа** в поле key — **file**

Если у вас возникает ошибка при отправке запроса тем или иным методом, пожалуйста, **убедитесь,** что вы четко следовали всем **вышеописанным рекомендациям.**

###

## Не нашел, что искал

По особым внутренним причинам некоторые методы запросов действительно могут отсутствовать в текущем репозитории.

Если вы не нашли нужный вам метод, пожалуйста, обратитесь к **[следующей документации.](https://github.com/4Forsythe/bitcom-client#readme)**

## Возникли вопросы?

Связаться с разработчиком можно, перейдя по любой из социальных ссылок в **[профиле.](https://github.com/4Forsythe)**

##### Для особо важных случаев — **forsythe.dev@gmail.com.**
